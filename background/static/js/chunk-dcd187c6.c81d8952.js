(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dcd187c6"],{"337c":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-article-container"},[a("div",{staticClass:"block"},[t._v("文章标题（必填）")]),a("el-input",{attrs:{placeholder:"请输入文章标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),a("div",{staticClass:"block"},[t._v("文章编辑（必填）")]),a("editor",{ref:"toastuiEditor",attrs:{initialValue:t.form.editText,height:"600px",options:t.editorOptions}}),a("div",{staticClass:"block"},[t._v("文章描述（必填）")]),a("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入文章的信息简介"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),a("Upload",{attrs:{uploadTitle:"文章预览图"},model:{value:t.form.thumb,callback:function(e){t.$set(t.form,"thumb",e)},expression:"form.thumb"}}),a("div",{staticClass:"block"},[t._v("文章分类（必填）")]),a("el-select",{staticStyle:{width:"200px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:t.changeHandle},slot:"prepend",model:{value:t.form.select,callback:function(e){t.$set(t.form,"select",e)},expression:"form.select"}},t._l(t.blogTypes,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),a("div",{staticClass:"block"},[a("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:t.editArticleHandle}},[t._v("确认修改")])],1)],1)},n=[],i=(a("a4d3"),a("e01a"),a("e459")),r=(a("f513"),a("f4c3"),a("d443")),c=a("c19d"),l=a("864d"),s={data:function(){return{id:null,form:{title:"",editorText:"",description:"",thumb:"",select:""},blogTypes:[],editorOptions:{language:"zh-CN"}}},created:function(){var t=this;Object(c["e"])().then((function(e){var a=e.data;t.blogTypes=a})),this.id=this.$route.params.id,Object(l["d"])(this.id).then((function(e){var a=e.data;t.form=a,t.form.select=null===a.category?"":a.category.id,t.$refs.toastuiEditor.invoke("setHTML",a.htmlContent)}))},components:{editor:i["a"],Upload:r["a"]},methods:{editArticleHandle:function(){var t=this,e=this.$refs.toastuiEditor.invoke("getHTML"),a=this.$refs.toastuiEditor.invoke("getMarkdown"),o={title:this.form.title,description:this.form.description,createDate:(new Date).getTime(),categoryId:this.form.select,toc:[],htmlContent:e,thumb:this.form.thumb,markdownContent:a};o.title&&o.description&&o.htmlContent&&o.categoryId?Object(l["c"])({id:this.form.id,data:o}).then((function(){t.$router.push("/articlelist"),t.$message.success("文章修改成功")})):this.$message.error("请填写所有内容")},changeHandle:function(){this.$forceUpdate()}}},u=s,d=(a("397b"),a("2877")),p=Object(d["a"])(u,o,n,!1,null,null,null);e["default"]=p.exports},"397b":function(t,e,a){"use strict";a("9951")},"40ad":function(t,e,a){"use strict";a("ba47")},"864d":function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"e",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return c})),a.d(e,"c",(function(){return l}));var o=a("b775");function n(t){return Object(o["a"])({url:"/api/blog/".concat(t),method:"get"})}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return Object(o["a"])({url:"/api/blog",method:"get",params:{page:t,limit:e,keyword:a,categoryId:n}})}function r(t){return Object(o["a"])({url:"/api/blog/".concat(t),method:"delete"})}function c(t){return Object(o["a"])({url:"/api/blog",method:"post",data:t})}function l(t){return Object(o["a"])({url:"/api/blog/".concat(t.id),method:"put",data:t.data})}},9951:function(t,e,a){},ba47:function(t,e,a){},c19d:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"d",(function(){return c})),a.d(e,"e",(function(){return l}));var o=a("b775");function n(t){return Object(o["a"])({url:"/api/blogtype",method:"post",data:t})}function i(t){return Object(o["a"])({url:"/api/blogtype/".concat(t),method:"delete"})}function r(t,e){return Object(o["a"])({url:"/api/blogtype/".concat(t),method:"put",data:e})}function c(t){return Object(o["a"])({url:"/api/blogtype/".concat(t),method:"get"})}function l(){return Object(o["a"])({url:"/api/blogtype",method:"get"})}},d443:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"block"},[t._v(t._s(t.uploadTitle))]),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess,headers:t.headers}},[t.value?a("img",{staticClass:"avatar",attrs:{src:t.value}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)},n=[],i={props:["uploadTitle","value"],computed:{headers:function(){return{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}}},methods:{handleAvatarSuccess:function(t){this.$emit("input",t.data)}}},r=i,c=(a("40ad"),a("2877")),l=Object(c["a"])(r,o,n,!1,null,null,null);e["a"]=l.exports}}]);